<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/root"
        android:tag="root"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@null">
 
       <!-- ru.tcgeo.gilib.GIMap -->
       <ru.tcgeo.gilib.GIMap
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginTop="67dp"/>

        <ru.tcgeo.gilib.GITouchControl
            android:id="@+id/touchcontrol"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="67dp" />

        <!-- Top bar image + buttons -->
        <!--<RelativeLayout  -->
        <FrameLayout
            android:id="@+id/top_bar_layout" 
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
                                     
            <ImageView 
                android:id="@+id/top_bar"	            
	            android:src="@drawable/top_bar"
	            android:background="@null"
	            android:contentDescription="@string/background"
	            android:layout_width="match_parent"
                android:layout_height="wrap_content" />

            <!--  Top bar buttons -->
            <LinearLayout 
                android:id="@+id/top_bar_buttons"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="170dp"
                android:orientation="horizontal"
                android:focusable="true" 
    			android:focusableInTouchMode="true">
                 
                <!-- Left divider -->
	            <View 
	                android:layout_height="match_parent"
	                android:layout_width="2dp"
	                android:background="#55555555"
                    android:layout_marginTop="8dp"
                    android:layout_marginBottom="8dp" />
	                
                <ImageButton 
	                android:id="@+id/top_bar_layers_button"
	                android:src="@drawable/top_bar_layers_button"
	                android:background="@null"
	                android:contentDescription="@string/top_bar_layers_button"
	                android:layout_width="wrap_content"
	                android:layout_height="wrap_content"
	                android:onClick="layersDialogClicked" />

                <!-- Right divider -->
	            <View 
	                android:layout_height="match_parent"
	                android:layout_width="2dp"
	                android:background="#55555555"
	                android:layout_marginTop="8dp"
	                android:layout_marginBottom="8dp" />
	            <!-- android:layout_alignParentRight="true"  -->

                <ImageButton
                    android:id="@+id/project_selector_button"
                    android:layout_width="67dp"
                    android:layout_height="67dp"
                    android:layout_gravity="center_vertical"
                    android:background="@drawable/top_button_background_normal"
                    android:contentDescription="@string/project_selector_button"
                    android:onClick="ProjectSelectorDialogClicked"
                    android:src="@drawable/open" />
	
                <View 
	                android:layout_height="match_parent"
	                android:layout_width="2dp"
	                android:background="#55555555"
	                android:layout_marginTop="8dp"
	                android:layout_marginBottom="8dp" />

                <ImageButton
                    android:id="@+id/markers_button"
                    android:layout_width="67dp"
                    android:layout_height="67dp"
                    android:layout_gravity="center_vertical"
                    android:background="@drawable/top_button_background_normal"
                    android:contentDescription="@string/markers_button"
                    android:onClick="MarkersDialogClicked"
                    android:src="@drawable/poi" />
                
                <View 
	                android:layout_height="match_parent"
	                android:layout_width="2dp"
	                android:background="@null"
	                android:layout_marginTop="8dp"
	                android:layout_marginBottom="8dp" />	

			    <EditText
			        android:id="@+id/search_text"
			        android:layout_width="wrap_content"
			        android:layout_height="40dp"
			        android:layout_gravity="center_vertical"
			        android:layout_marginBottom="8dp"
			        android:layout_marginLeft="8dp"
			        android:layout_marginRight="8dp"
			        android:layout_marginTop="8dp"
			        android:background="@drawable/searchbar_background"
			        android:ems="6"
			        android:gravity="center_vertical|center_horizontal"
			        android:inputType="text"
			        android:textSize="16sp"
			        android:visibility="visible" >
			        <!--  android:layout_marginStart="8dp" -->
					<!-- android:layout_marginEnd="8dp" -->
					<!-- android:textAlignment="center"  -->
			    </EditText>	      

			    <ImageButton
			        android:id="@+id/button_stop_search"
			        android:layout_width="wrap_content"
			        android:layout_height="wrap_content"
			        android:contentDescription="@string/button_stop_search"
			        android:layout_gravity="center_vertical"
			        android:onClick="on_stop_search"
			        android:src="@android:drawable/ic_input_delete" />
 
                <View 
	                android:layout_height="match_parent"
	                android:layout_width="2dp"
	                android:background="#55555555"
	                android:layout_marginTop="8dp"
	                android:layout_marginBottom="8dp" />	
	            <!-- editables -->

	            <ImageButton
	                android:id="@+id/button_editable_layers"
	                android:layout_width="wrap_content"
	                android:layout_height="wrap_content"
	                android:layout_gravity="center_vertical"
	                android:contentDescription="@string/button_editable_layers"
	                android:onClick="EditableLayersDialogClicked"
	                android:src="@android:drawable/ic_menu_edit" />
 
                <View 
	                android:layout_height="match_parent"
	                android:layout_width="2dp"
	                android:background="#55555555"
	                android:layout_marginTop="8dp"
	                android:layout_marginBottom="8dp" />

                <!-- ImageButton
                    android:id="@+id/button_gps"
                    android:layout_width="67dp"
                    android:layout_height="67dp"
                    android:layout_gravity="center_vertical"
                    android:layout_margin="0dp"
                    android:adjustViewBounds="true"
                    android:background="@drawable/top_button_background_normal"
                    android:contentDescription="@string/button_gps"
                    android:onClick="GPSDialogClicked"
                    android:src="@drawable/gps_avaliable" /-->

                <ru.tcgeo.gilib.gps.GIGPSButtonView
                    android:id="@+id/top_bar_gps_button"
                    android:layout_width="64dp"
                    android:layout_height="64dp"
                    android:layout_gravity="center"
                    android:layout_marginLeft="5dp"
                    android:layout_marginRight="5dp" />
                
                <View 
	                android:layout_height="match_parent"
	                android:layout_width="2dp"
	                android:background="#55555555"
	                android:layout_marginTop="8dp"
	                android:layout_marginBottom="8dp" />
			    	                
            </LinearLayout>
	          
        <!-- </RelativeLayout> -->    
        </FrameLayout>
        
        <!-- Position button -->
        <!-- android:layout_alignRight="@id/map"-->
        <!-- touchcontrol -->
        <FrameLayout 
            android:id="@+id/position_frame"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@id/touchcontrol"
            android:layout_marginRight="20dp"
            android:layout_marginTop="80dp" >
        
	        <ImageView 
	            android:id="@+id/position_panel"
	            android:src="@drawable/position_panel"
	            android:layout_width="wrap_content"
	            android:layout_height="wrap_content" 
	            android:contentDescription="@string/panel_position" />

	     <ImageButton
	         android:id="@+id/button_position"
	         android:layout_width="wrap_content"
	         android:layout_height="wrap_content"
	         android:layout_gravity="center_horizontal|top"
	         android:clickable="true"
	         android:contentDescription="@string/button_position"
	         android:onClick="moveToPosition"
	         android:paddingTop="8dp"
	         android:src="@drawable/position_button_fixable" />

        </FrameLayout>
	            
                    
        <!-- Plus/minus buttons -->
        <!-- android:layout_alignRight="@id/map"-->
        <!-- touchcontrol -->        
        <FrameLayout 
            android:id="@+id/scale_frame"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@id/touchcontrol"
            android:layout_below="@id/position_frame"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp" >
        
	        <ImageView
	            android:id="@+id/zoom_panel" 
	            android:src="@drawable/panel_zoom"
	            android:scaleType="centerCrop"
	            android:layout_width="wrap_content"
	            android:layout_height="wrap_content" 
	            android:contentDescription="@string/panel_zoom" />
	         
	        <ImageButton 
	            android:id="@+id/button_zoomin"
	            android:src="@drawable/button_zoomin"
	            android:layout_width="wrap_content"
	            android:layout_height="wrap_content"
                android:contentDescription="@string/button_zoomin"
                android:layout_gravity="center_horizontal|top"
                android:paddingTop="8dp"
                android:background="@null"                                
	            android:clickable="true" 
	            android:onClick="zoomIn" />
	        
	        <ImageButton 
                android:id="@+id/button_zoomout"
                android:src="@drawable/button_zoomout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/button_zoomout"
                android:layout_gravity="center_horizontal|bottom"
                android:paddingBottom="15dp"
                android:background="@null"                                
                android:clickable="true"
                android:onClick="zoomOut" />
        </FrameLayout>
        <!-- android:layout_alignBottom="@id/map"-->
        <!-- layout_alignRight="@id/map"-->
        <!-- touchcontrol -->  
        <FrameLayout
            android:id="@+id/rule_square_control"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp"
            android:layout_alignBottom="@id/touchcontrol"            
            android:layout_alignRight="@id/touchcontrol">
	        <ImageView
	            android:id="@+id/rule_panel" 
	            android:src="@drawable/panel_zoom"
	            android:scaleType="centerCrop"
	            android:layout_width="wrap_content"
	            android:layout_height="wrap_content" 
	            android:contentDescription="@string/panel_zoom" />	        
            <ImageButton
		        android:id="@+id/toggleButtonRule"
		        android:layout_width="wrap_content"
		        android:layout_height="wrap_content"
		        android:contentDescription="@string/button_rule_tool"
			    android:src="@drawable/button_rule"
                android:layout_gravity="center_horizontal|top"
                android:paddingTop="8dp"			    
		        android:onClick="onRuleTool"/>

    		<ImageButton
		        android:id="@+id/toggleButtonSquare"
		        android:layout_width="wrap_content"
		        android:layout_height="wrap_content"
				android:contentDescription="@string/button_square_tool"		        
			    android:src="@drawable/button_square"
                android:layout_gravity="center_horizontal|bottom"
                android:paddingBottom="15dp"       
		        android:onClick="onSquareTool"/>
        </FrameLayout>
        <!--  ru.tcgeo.application.GIRuleSquareControl
            android:id="@+id/rule_square_control"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp"
            android:gravity="bottom|right">

       	</ru.tcgeo.application.GIRuleSquareControl-->  
        <!--android:layout_below="@id/scale_frame" --> 
        
        <!-- android:layout_alignLeft="@id/map"-->
        <!-- android:layout_alignBottom="@id/map"-->
        <!-- touchcontrol -->
        <ru.tcgeo.application.GIScaleControl 
            android:id="@+id/scale_control_screen"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/touchcontrol"
            android:layout_alignBottom="@id/touchcontrol"
            android:layout_marginLeft="50dp"
            android:layout_marginBottom="40dp">
        </ru.tcgeo.application.GIScaleControl>
        
    </RelativeLayout>
